<%- include('../partials/header', { title: 'Settings - Sports Amigo' }) %>

<%- include('../partials/navbar', { user: user }) %>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="card-title mb-0">Settings</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-4">
                            <!-- Settings Navigation -->
                            <div class="list-group">
                                <a href="#general" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                                    <i class="fas fa-cog me-2"></i> General Settings
                                </a>
                                <a href="#notifications" class="list-group-item list-group-item-action" data-bs-toggle="list">
                                    <i class="fas fa-bell me-2"></i> Notifications
                                </a>
                                <a href="#appearance" class="list-group-item list-group-item-action" data-bs-toggle="list">
                                    <i class="fas fa-palette me-2"></i> Appearance
                                </a>
                                <a href="#privacy" class="list-group-item list-group-item-action" data-bs-toggle="list">
                                    <i class="fas fa-shield-alt me-2"></i> Privacy
                                </a>
                                <a href="#integrations" class="list-group-item list-group-item-action" data-bs-toggle="list">
                                    <i class="fas fa-link me-2"></i> Integrations
                                </a>
                                <a href="#advanced" class="list-group-item list-group-item-action" data-bs-toggle="list">
                                    <i class="fas fa-sliders-h me-2"></i> Advanced
                                </a>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <!-- Settings Content -->
                            <div class="tab-content">
                                <!-- General Settings -->
                                <div class="tab-pane fade show active" id="general">
                                    <h5 class="mb-3">General Settings</h5>
                                    <form action="/organizer/settings/general" method="POST">
                                        <div class="mb-3">
                                            <label for="language" class="form-label">Language</label>
                                            <select class="form-select" id="language" name="language">
                                                <option value="en" selected>English</option>
                                                <option value="es">Spanish</option>
                                                <option value="fr">French</option>
                                                <option value="de">German</option>
                                                <option value="zh">Chinese</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="timezone" class="form-label">Timezone</label>
                                            <select class="form-select" id="timezone" name="timezone">
                                                <option value="UTC" selected>UTC</option>
                                                <option value="America/New_York">Eastern Time (ET)</option>
                                                <option value="America/Chicago">Central Time (CT)</option>
                                                <option value="America/Denver">Mountain Time (MT)</option>
                                                <option value="America/Los_Angeles">Pacific Time (PT)</option>
                                                <option value="Europe/London">London</option>
                                                <option value="Europe/Paris">Paris</option>
                                                <option value="Asia/Tokyo">Tokyo</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="dateFormat" class="form-label">Date Format</label>
                                            <select class="form-select" id="dateFormat" name="dateFormat">
                                                <option value="MM/DD/YYYY" selected>MM/DD/YYYY</option>
                                                <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                                                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="enableAnalytics" name="enableAnalytics" checked>
                                                <label class="form-check-label" for="enableAnalytics">Enable Analytics</label>
                                                <div class="form-text">Allow us to collect anonymous usage data to improve the platform</div>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </form>
                                </div>
                                
                                <!-- Notifications -->
                                <div class="tab-pane fade" id="notifications">
                                    <h5 class="mb-3">Notification Settings</h5>
                                    <form action="/organizer/settings/notifications" method="POST">
                                        <div class="mb-4">
                                            <h6>Email Notifications</h6>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="emailNewRegistration" name="emailNewRegistration" checked>
                                                <label class="form-check-label" for="emailNewRegistration">
                                                    New team registrations
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="emailEventReminders" name="emailEventReminders" checked>
                                                <label class="form-check-label" for="emailEventReminders">
                                                    Event reminders (24 hours before)
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="emailSystemUpdates" name="emailSystemUpdates" checked>
                                                <label class="form-check-label" for="emailSystemUpdates">
                                                    System updates and announcements
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="emailMarketingNews" name="emailMarketingNews">
                                                <label class="form-check-label" for="emailMarketingNews">
                                                    Marketing emails and newsletters
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h6>In-App Notifications</h6>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="inAppNewRegistration" name="inAppNewRegistration" checked>
                                                <label class="form-check-label" for="inAppNewRegistration">
                                                    New team registrations
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="inAppEventReminders" name="inAppEventReminders" checked>
                                                <label class="form-check-label" for="inAppEventReminders">
                                                    Event reminders
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="inAppTeamUpdates" name="inAppTeamUpdates" checked>
                                                <label class="form-check-label" for="inAppTeamUpdates">
                                                    Team updates and score submissions
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="notificationFrequency" class="form-label">Email Digest Frequency</label>
                                            <select class="form-select" id="notificationFrequency" name="notificationFrequency">
                                                <option value="immediately" selected>Send Immediately</option>
                                                <option value="daily">Daily Digest</option>
                                                <option value="weekly">Weekly Digest</option>
                                            </select>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </form>
                                </div>
                                
                                <!-- Appearance -->
                                <div class="tab-pane fade" id="appearance">
                                    <h5 class="mb-3">Appearance Settings</h5>
                                    <form action="/organizer/settings/appearance" method="POST">
                                        <div class="mb-3">
                                            <label for="theme" class="form-label">Theme</label>
                                            <select class="form-select" id="theme" name="theme">
                                                <option value="light" selected>Light</option>
                                                <option value="dark">Dark</option>
                                                <option value="system">System Default</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Color Scheme</label>
                                            <div class="d-flex gap-3 mb-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="colorScheme" id="colorDefault" value="default" checked>
                                                    <label class="form-check-label" for="colorDefault">
                                                        Default Blue
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="colorScheme" id="colorGreen" value="green">
                                                    <label class="form-check-label" for="colorGreen">
                                                        Green
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="colorScheme" id="colorPurple" value="purple">
                                                    <label class="form-check-label" for="colorPurple">
                                                        Purple
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="fontSize" class="form-label">Font Size</label>
                                            <select class="form-select" id="fontSize" name="fontSize">
                                                <option value="small">Small</option>
                                                <option value="medium" selected>Medium</option>
                                                <option value="large">Large</option>
                                            </select>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="compactMode" name="compactMode">
                                                <label class="form-check-label" for="compactMode">Compact Mode</label>
                                                <div class="form-text">Reduce padding and spacing for a more compact look</div>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </form>
                                </div>
                                
                                <!-- Privacy -->
                                <div class="tab-pane fade" id="privacy">
                                    <h5 class="mb-3">Privacy Settings</h5>
                                    <form action="/organizer/settings/privacy" method="POST">
                                        <div class="mb-4">
                                            <h6>Event Visibility</h6>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="radio" name="eventVisibility" id="eventVisibilityPublic" value="public" checked>
                                                <label class="form-check-label" for="eventVisibilityPublic">
                                                    Public - Events are visible to everyone
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="radio" name="eventVisibility" id="eventVisibilityRegistered" value="registered">
                                                <label class="form-check-label" for="eventVisibilityRegistered">
                                                    Registered Users - Only registered users can see your events
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="radio" name="eventVisibility" id="eventVisibilityInvited" value="invited">
                                                <label class="form-check-label" for="eventVisibilityInvited">
                                                    Invited Only - Only users with an invitation link can see your events
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h6>Profile Visibility</h6>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="showEmail" name="showEmail">
                                                <label class="form-check-label" for="showEmail">
                                                    Show email to registered teams
                                                </label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" id="showPhone" name="showPhone">
                                                <label class="form-check-label" for="showPhone">
                                                    Show phone number to registered teams
                                                </label>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="dataCollection" name="dataCollection" checked>
                                                <label class="form-check-label" for="dataCollection">Allow Data Collection</label>
                                                <div class="form-text">We collect anonymous usage data to improve our platform</div>
                                            </div>
                                        </div>
                                        
                                        <button type="submit" class="btn btn-primary">Save Changes</button>
                                    </form>
                                </div>
                                
                                <!-- Integrations -->
                                <div class="tab-pane fade" id="integrations">
                                    <h5 class="mb-3">Connected Services</h5>
                                    
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-1"><i class="fab fa-google text-danger me-2"></i> Google Calendar</h6>
                                                    <p class="text-muted mb-0 small">Sync events with Google Calendar</p>
                                                </div>
                                                <button class="btn btn-sm btn-primary">Connect</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-1"><i class="fab fa-slack text-primary me-2"></i> Slack</h6>
                                                    <p class="text-muted mb-0 small">Receive notifications via Slack</p>
                                                </div>
                                                <button class="btn btn-sm btn-primary">Connect</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card mb-3">
                                        <div class="card-body">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h6 class="mb-1"><i class="fab fa-mailchimp text-warning me-2"></i> Mailchimp</h6>
                                                    <p class="text-muted mb-0 small">Email marketing integration</p>
                                                </div>
                                                <button class="btn btn-sm btn-primary">Connect</button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <h5 class="mb-3 mt-4">API Access</h5>
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="apiKey" class="form-label">API Key</label>
                                                <div class="input-group">
                                                    <input type="text" class="form-control" id="apiKey" value="••••••••••••••••••••••••" readonly>
                                                    <button class="btn btn-outline-secondary" type="button" id="showApiKey">Show</button>
                                                    <button class="btn btn-outline-secondary" type="button" id="regenerateApiKey">Regenerate</button>
                                                </div>
                                                <div class="form-text">
                                                    Use this key to access our API services. Keep it secret!
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="enableApi" name="enableApi" checked>
                                                    <label class="form-check-label" for="enableApi">Enable API Access</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Advanced -->
                                <div class="tab-pane fade" id="advanced">
                                    <h5 class="mb-3">Advanced Settings</h5>
                                    
                                    <div class="mb-4">
                                        <h6>Data Management</h6>
                                        <p class="text-muted small">Manage your data and account settings</p>
                                        
                                        <a href="#" class="btn btn-outline-primary mb-2">Export All Data</a>
                                        <a href="#" class="btn btn-outline-danger mb-2 ms-2" data-bs-toggle="modal" data-bs-target="#deleteAccountModal">Delete Account</a>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <h6>Cache Management</h6>
                                        <p class="text-muted small">Clear cached data to resolve potential issues</p>
                                        
                                        <a href="#" class="btn btn-outline-secondary">Clear Application Cache</a>
                                    </div>
                                    
                                    <div class="mb-4">
                                        <h6>Developer Options</h6>
                                        <div class="form-check form-switch mb-2">
                                            <input class="form-check-input" type="checkbox" id="debugMode" name="debugMode">
                                            <label class="form-check-label" for="debugMode">Enable Debug Mode</label>
                                            <div class="form-text">Shows additional debugging information</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Delete Account Modal -->
<div class="modal fade" id="deleteAccountModal" tabindex="-1" aria-labelledby="deleteAccountModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteAccountModalLabel">Confirm Account Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-danger">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Warning:</strong> This action cannot be undone.
                </div>
                <p>Deleting your account will permanently remove:</p>
                <ul>
                    <li>All your events and event history</li>
                    <li>Team registrations and participant data</li>
                    <li>Account settings and preferences</li>
                </ul>
                <div class="mb-3">
                    <label for="deleteConfirmation" class="form-label">Type "DELETE" to confirm</label>
                    <input type="text" class="form-control" id="deleteConfirmation" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn" disabled>Delete Account</button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // API Key Toggle
        const apiKeyField = document.getElementById('apiKey');
        const showApiKeyBtn = document.getElementById('showApiKey');
        
        if (showApiKeyBtn && apiKeyField) {
            showApiKeyBtn.addEventListener('click', function() {
                if (apiKeyField.type === 'text') {
                    apiKeyField.type = 'password';
                    showApiKeyBtn.textContent = 'Show';
                } else {
                    apiKeyField.type = 'text';
                    apiKeyField.value = 'sk_live_example123456789abcdef';
                    showApiKeyBtn.textContent = 'Hide';
                }
            });
        }
        
        // Delete Account Confirmation
        const deleteConfirmField = document.getElementById('deleteConfirmation');
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        
        if (deleteConfirmField && confirmDeleteBtn) {
            deleteConfirmField.addEventListener('input', function() {
                confirmDeleteBtn.disabled = this.value !== 'DELETE';
            });
        }
    });
</script>

<%- include('../partials/footer') %> 